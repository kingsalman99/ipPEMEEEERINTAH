<!DOCTYPE html>
<html lang="en">
<head>
    <title>IPBank by Ed. E</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <!-- It doesnt seem like we need these... remove in PR?-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <!-- Will keep fn anyway-->

</head>
<body>
<div class="container">
    <div class="header">
        <h1>üè¶ IPBank</h1>
        <h5><span style="color:white;">---------</span>by Ed.E</h5>
        <p>Search over 145,000 government and school IP addresses.</p> 
    </div>
    
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>PLEASE READ</strong>
        <ul>
            <li>This database contains over 145,000+ IP addresses from schools, colleges, universities and government agencies and even the offices
                of organisations such as NATO and the UN.</li>
            <li>At the moment, this data contains mostly English speaking countries.</li>
            <li><b>Some/Most</b> of this data is up to date</li>
            <li><strong>This data is provided for research ONLY.</strong> Using this data maliciously is not supported by any of the contributors.</li>
        </ul>
        <small>For more information, read the <a href="#">FAQ</a> (coming soon)</small> <!--Added placeholder hyperlink for future use-->
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
    </div>
    <div class="alert" role="alert">
        <strong>You should use this search tool and database for:</strong><br>
        ‚Ä¢ Research<br>
        ‚Ä¢ Finding the contact details of schools, i.e. if you have had abuse from an IP address, you may be able to locate the contact details of teachers.<br>
        ‚Ä¢ Any other legal purpose<br>
        ‚ùå Any misuse of this information is not supported by any of the contributors, nor will we be responsible for any such misuse.
    </div>
    <div id="loading">
        <!-- Tfw you have to load over 28mb of scripts. sorry about the center tag -->
        <center>
            <b>Please wait for the database to load...</b>
            <br><small>12MB Database</small>
        </center>
    </div>

    <div id="loaded" style="display:none;">
        <!-- Search time
            Only shows when loaded
        I am horrible at html and this was whipped up really quick
        -->
        
        <div class="alert alert-primary alert-dismissible fade show" role="alert">
            <strong>Tip: </strong> Enter an IP address, hostname or part of the details, such as a city or physical address, then click the appropriate button. If you get no results, try a different button or query.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
        </div>
        <strong>Choose the database you would like to search: </strong>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="dbSelect" id="govDBSel" value="gov">
            <label class="form-check-label" for="exampleRadios1">
                Government and Defence
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="dbSelect" id="eduDBSel" value="edu" checked>
            <label class="form-check-label" for="exampleRadios2">
                Schools, Colleges, Universities and other Education
            </label>
        </div>
        Search:
        <input type="text" class="form-control" id="searchBox" placeholder="Enter your query"> <br>
        <div id="searchControls" style="text-align: center;">
            <button type="button" class="btn btn-primary" onclick="searchIPs();">Search IPs</button>
            <button type="button" class="btn btn-secondary" onclick="searchDetails();">Search Details</button>
            <input type="checkbox" id="hostcheck"> Search by hostname </input>
            <button type="button" class="btn btn-dark" onclick="searchHostname();">Search Hostnames</button>
            <input type="submit" value="Search" onclick="searchDB()"></input>
            <br>
            <small>Not sure what to search? Try 100 random IPs: <a href="#" onclick="Ran100(ipBank.IPs.education);">Education</a>     <a href="#" onclick="Ran100(ipBank.IPs.government);">Government</a></small>
        </div>
        <br><br>
        <div class="table-responsive">
            <table class="table" id="resultsTable">
               
            </table>
        </div>
    </div>
    
    
</div>

<script>
    function loaded() {
        // we loaded
        var script = document.createElement('script');
        script.src = "ipBank12042020gov.js"; // include gov database
        script.onload = function() {
            // once loaded we can do our things
            document.getElementById("loading").style = "display:none;";
            document.getElementById("loaded").style = ""; // show search
        };
        document.head.appendChild(script);
    }

    function Ran100(obj) {
        // Random 100 IPS
        let finalHtml = `
        <tr>
            <th>IP</th>
            <th>Type</th>
            <th>Hostname</th>
            <th>Details</th>
        </tr>
        `;
        for (var i = 0; i < 100; i++) {
           // 100 times
           finalHtml += ipObjToTable(obj[Math.floor(Math.random() * obj.length)]);
        }
        document.getElementById("resultsTable").innerHTML = finalHtml;
    }

    function ipObjToTable(obj) {
        return `
        <tr>
            <td>`+ obj.ip +`</td>
            <td>`+ obj.type +`</td>
            <td>`+ obj.host +`</td>
            <td>`+ obj.details +`</td>
        </tr>
        `;
    }

    function currentDB() {
        if (document.getElementById("govDBSel").checked) {
            return ipBank.IPs.government;
        } else {
            return ipBank.IPs.education;
        }
    }

    function searchIPs() {
        let finalHtml = `
        <tr>
            <th>IP</th>
            <th>Type</th>
            <th>Hostname</th>
            <th>Details</th>
        </tr>
        `;

        let query = document.getElementById("searchBox").value.toLowerCase();
        let cDB = currentDB();
        cDB.forEach(function(v){
            if (v.ip.toLowerCase().includes(query)) {
                finalHtml += ipObjToTable(v);
            }
        });
        // Done
        document.getElementById("resultsTable").innerHTML = finalHtml;
    }

    function searchDetails() {
        let finalHtml = `
        <tr>
            <th>IP</th>
            <th>Type</th>
            <th>Hostname</th>
            <th>Details</th>
        </tr>
        `;
        let query = document.getElementById("searchBox").value.toLowerCase();
        let cDB = currentDB();
        cDB.forEach(function(v){
            if (v.details.toLowerCase().includes(query)) {
                finalHtml += ipObjToTable(v);
            }
        });
        // Done
        document.getElementById("resultsTable").innerHTML = finalHtml;
    }

    function searchHostname() {
        let finalHtml = `
        <tr>
            <th>IP</th>
            <th>Type</th>
            <th>Hostname</th>
            <th>Details</th>
        </tr>
        `;
        let query = document.getElementById("searchBox").value.toLowerCase();
        let cDB = currentDB();
        cDB.forEach(function(v){
            if (v.host.toLowerCase().includes(query)) {
                finalHtml += ipObjToTable(v);
            }
        });
        document.getElementById("resultsTable").innerHTML = finalHtml;
    }
        function searchDB() { // Searches but autodetects (based on checkbox and checking for ip)
            let finalHtml = `
            <tr>
                <th>IP</th>
                <th>Type</th>
                <th>Hostname</th>
                <th>Details</th>
            </tr>
            `
            let query = document.getElementById("searchbox").value.toLowerCase();
            let checked = document.getElementById('hostcheck').checked();
            let cDB = currentDB();
            if(checked == false) { // When false: IP check then search Details/IP
                let isIP = false;
                let query_temp = query; // Regex time
                query_temp.replace(/[0-9]/g, 'X');
                query_temp.replace(/X{2,}/g, 'X');
                if(query_temp == "X.X.X.X") { // if it follows the ip structure its an ip boi
                    isIP = true;
                } else {
                    isIP = false;                    
                }
            }
                    document.getElementById("resultsTable").innerHTML = finalHtml;

                    url = url.replace(/\/p\d+/, '');
        }
        // Done

         // Notes for later self: IF the contents of searchBox mentions "details" in ANY form& is search details, 
        //ignore everything but 'Details Unknown'
        //() IF it is an ip (We can follow the general rule of replacing any amount of numbers 
        //next to eachother with 1 X (after removing whitespace) and then checking if it follows the structure X.X.X.X, as it seems to be only ipv4)
        // More notes: since we can automate detecting an IP, we should make the choice to search for hosts a checkbox, since honestly most records lack one.
        // Also, add option to list all with hostnames (just add if they dont contain "" aka nothing)
        // Doing this actual bit will be easy; keep the structure the same here but skip checking if checkbox ticked
</script>

<script id="eduDatabase" src="ipBank12042020edu.js" onload="loaded();"></script>


</body>
</html>





<!--No, Richard, it's 'Linux', not 'GNU/Linux'. The most important contributions
that the FSF made to Linux were the creation of the GPL and the GCC compiler. 
Those are fine and inspired products. GCC is a monumental achievement and 
has earned you, RMS, and the Free Software Foundation countless kudos and 
much appreciation.
Following are some reasons for you to mull over, including some already 
answered in your FAQ. One guy, Linus Torvalds, used GCC to make his 
operating system (yes, Linux is an OS -- more on this later). He named it 'Linux' 
with a little help from his friends. Why doesn't he call it GNU/Linux? Because he 
wrote it, with more help from his friends, not you. You named your stuff, I named 
my stuff -- including the software I wrote using GCC -- and Linus named his stuff. 
The proper name is Linux because Linus Torvalds says so. Linus has spoken. Accept
 his authority. To do otherwise is to become a nag. You don't want to be known as a nag,
 do you? (An operating system) != (a distribution). Linux is an operating system. By my 
 definition, an operating system is that software which provides and limits access to 
 hardware resources on a computer. That definition applies whereever you see Linux in 
 use. However, Linux is usually distributed with a collection of utilities and applications 
 to make it easily configurable as a desktop system, a server, a development box, or a 
 graphics workstation, or whatever the user needs. In such a configuration, we have a 
 Linux (based) distribution. Therein lies your strongest argument for the unwieldy title
'GNU/Linux' (when said bundled software is largely from the FSF). Go bug the distribution
makers on that one. Take your beef to Red Hat, Mandrake, and Slackware. At least there you
have an argument. Linux alone is an operating system that can be used in various applications 
without any GNU software whatsoever. Embedded applications come to mind as an obvious
example. Next, even if we limit the GNU/Linux title to the GNU-based Linux distributions, we run 
into another obvious problem. XFree86 may well be more important to a particular Linux 
installation than the sum of all the GNU contributions. More properly, shouldn't the distribution 
be called XFree86/Linux? Or, at a minimum, XFree86/GNU/Linux? Of course, it would be rather 
arbitrary to draw the line there when many other fine contributions go unlisted. Yes, I know you've 
heard this one before. Get used to it. You'll keep hearing it until you can cleanly counter it.
You seem to like the lines-of-code metric. There are many lines of GNU code in a typical Linux distribution. 
You seem to suggest that (more LOC) == (more important). However, I submit to you that raw LOC numbers 
do not directly correlate with importance. I would suggest that clock cycles spent on code is a better metric.
For example, if my system spends 90% of its time executing XFree86 code, XFree86 is probably the single 
most important collection of code on my system. Even if I loaded ten times as many lines of useless bloatware
on my system and I never excuted that bloatware, it certainly isn't more important code than XFree86.
Obviously, this metric isn't perfect either, but LOC really, really sucks. Please refrain from using it ever 
again in supporting any argument. Last, I'd like to point out that we Linux and GNU users shouldn't be fighting 
among ourselves over naming other people's software. But what the heck, I'm in a bad mood now. I think I'm feeling
sufficiently obnoxious to make the point that GCC is so very famous and, yes, so very useful only because Linux was 
developed. In a show of proper respect and gratitude, shouldn't you and everyone refer to GCC as 'the Linux compiler'? 
Or at least, 'Linux GCC'? Seriously, where would your masterpiece be without Linux? Languishing with the HURD?
If there is a moral buried in this rant, maybe it is this: Be grateful for your abilities and your incredible success and your 
considerable fame. Continue to use that success and fame for good, not evil. Also, be especially grateful for Linux' huge 
contribution to that success. You, RMS, the Free Software Foundation, and GNU software have reached their current high
 profiles largely on the back of Linux. You have changed the world. Now, go forth and don't be a nag.
                                                                        Thanks for listening.
-->
<!--this is very funny right-->